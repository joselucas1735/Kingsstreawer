<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carrinho - King's</title>
  <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;600;800&display=swap" rel="stylesheet"/>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Urbanist', sans-serif; }
    body { background-color: #f9f9f9; color: #111; padding: 2rem; }
    h1 { text-align: center; margin-bottom: 2rem; font-size: 2rem; }
    .carrinho-container {
      max-width: 700px; margin: 0 auto;
      background-color: #fff; padding: 2rem;
      border-radius: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    .item {
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem 0; border-bottom: 1px solid #ddd;
    }
    .item:last-child { border-bottom: none; }
    .item span { font-size: 1.1rem; }
    .quantidade { display: flex; align-items: center; gap: 8px; }
    .quantidade button {
      background-color: #FFD700; border: none;
      padding: 5px 10px; border-radius: 6px;
      font-weight: bold; cursor: pointer;
    }
    .botoes {
      margin-top: 2rem; display: flex;
      justify-content: space-between; flex-wrap: wrap; gap: 1rem;
    }
    button, .link-btn {
      padding: 0.75rem 1.5rem; font-size: 1rem;
      font-weight: 600; border: none;
      border-radius: 8px; cursor: pointer;
      transition: background 0.3s;
      text-decoration: none;
      display: inline-block;
    }
    .btn-limpar {
      background-color: #e53935; color: white;
    }
    .btn-limpar:hover { background-color: #c62828; }
    .btn-finalizar {
      background-color: #000; color: white;
    }
    .btn-finalizar:hover { background-color: #333; }
    .btn-voltar {
      background-color: #FFD700; color: #000;
    }
    .btn-voltar:hover { background-color: #e6c200; }
    .vazio { text-align: center; color: #666; font-size: 1.1rem; margin-top: 2rem; }
    .total { margin-top: 1.5rem; text-align: right; font-size: 1.2rem; font-weight: bold; }
    @media (max-width: 600px) {
      .item { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
      .botoes { flex-direction: column; align-items: center; }
    }
  </style>
</head>
<body>
  <h1>üõí Seu Carrinho</h1>
  <div class="carrinho-container">
    <div id="lista-carrinho"></div>
    <div id="valor-total" class="total"></div>
    <div class="botoes">
      <button class="btn-limpar" onclick="limparCarrinho()">Limpar carrinho</button>
      <button class="btn-finalizar" onclick="finalizarCompra()">Finalizar compra</button>
      <a href="index.html" class="link-btn btn-voltar">‚¨Ö Voltar √†s Compras</a>
    </div>
  </div>  

  <script>
    const carrinhoEl = document.getElementById('lista-carrinho');
    const totalEl = document.getElementById('valor-total');
    let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];

    function renderizarCarrinho() {
      if (carrinho.length === 0) {
        carrinhoEl.innerHTML = '<p class="vazio">Seu carrinho est√° vazio.</p>';
        totalEl.textContent = '';
        return;
      }

      carrinhoEl.innerHTML = '';
      let total = 0;

      carrinho.forEach((produto, index) => {
        const precoNumerico = parseFloat(produto.preco.replace('R$', '').replace(',', '.'));
        total += precoNumerico * (produto.quantidade || 1);

        const item = document.createElement('div');
        item.classList.add('item');
        item.innerHTML = `
          <span>${produto.nome} - Cor: ${produto.cor} - Tam: ${produto.tamanho} - R$ ${precoNumerico.toFixed(2).replace('.', ',')}</span>
          <div class="quantidade">
            <button onclick="alterarQuantidade(${index}, -1)">‚ûñ</button>
            <span>${produto.quantidade || 1}</span>
            <button onclick="alterarQuantidade(${index}, 1)">‚ûï</button>
            <button onclick="removerItem(${index})">‚ùå</button>
          </div>
        `;
        carrinhoEl.appendChild(item);
      });

      totalEl.textContent = 'Total: R$ ' + total.toFixed(2).replace('.', ',');
    }

    function alterarQuantidade(index, delta) {
      if (!carrinho[index].quantidade) carrinho[index].quantidade = 1;
      carrinho[index].quantidade += delta;
      if (carrinho[index].quantidade <= 0) {
        carrinho.splice(index, 1);
      }
      localStorage.setItem('carrinho', JSON.stringify(carrinho));
      renderizarCarrinho();
    }

    function removerItem(index) {
      carrinho.splice(index, 1);
      localStorage.setItem('carrinho', JSON.stringify(carrinho));
      renderizarCarrinho();
    }

    function limparCarrinho() {
      localStorage.removeItem('carrinho');
      carrinho = [];
      renderizarCarrinho();
    }

    function finalizarCompra() {
      if (carrinho.length === 0) {
        alert('Seu carrinho est√° vazio!');
        return;
      }
      const mensagem = encodeURIComponent(
        'Ol√°, quero finalizar a compra com os seguintes produtos:\\n' +
        carrinho.map(p => `${p.nome} - Cor: ${p.cor} - Tam: ${p.tamanho} - ${p.preco} (Qtd: ${p.quantidade || 1})`).join('\\n')
      );
      window.open('https://wa.me/5588988379535?text=' + mensagem, '_blank');
    }

    renderizarCarrinho();
  </script>
</body>
</html>